<!DOCTYPE html>
<html>
<head>
  <title>Document Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    body { font-family: 'Source Sans Pro', sans-serif; max-width:800px; margin:40px auto; padding:20px; background:#fff8f3; }
    h1 { color:#ff6b00; text-transform:uppercase; margin-bottom:30px; font-family:'Anton',sans-serif; }
    .form-group { margin-bottom:12px; display:flex; align-items:center; gap:10px; }
    label { width:150px; color:#333; }
    .input-group { flex:1; display:flex; gap:10px; align-items:center; }
    input, select { flex:1; padding:6px; border:2px solid #ffd0a8; border-radius:4px; background:white; }
    input:focus, select:focus { outline:none; border-color:#ff6b00; }
    button { background:#ff6b00; color:white; padding:8px 16px; border:none; cursor:pointer; border-radius:4px; text-transform:uppercase; }
    .randomize-btn { background:#ff8533; padding:6px 12px; font-size:14px; }
    .randomize-btn:hover { background:#ff9966; }
    .spinner { margin:20px auto; border:6px solid #f3f3f3; border-top:6px solid #3498db; border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; display:none; }
    @keyframes spin { 0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }
    #generateBtn { margin-top:20px; width:100%; padding:12px; font-size:18px; font-family:'Anton',sans-serif; }
    #result { margin-top:20px; padding:20px; background:white; border-radius:4px; border:2px solid #ffd0a8; }
    .download-link { display:block; color:#ff6b00; margin:5px 0; text-decoration:none; }
    .download-link:hover { color:#ff8533; }
    /* tooltip */
    .tooltip { position: relative; display: inline-block; cursor: help; }
    .tooltip .tooltiptext { visibility: hidden; width:180px; background: #333; color:#fff; text-align:center; border-radius:4px; padding:5px; position:absolute; z-index:1; bottom:125%; left:50%; transform:translateX(-50%); opacity:0; transition:opacity .3s; }
    .tooltip:hover .tooltiptext { visibility: visible; opacity:1; }
  </style>
</head>
<body>
  <h1>Document Generator</h1>

  <div class="form-group" id="documentTypeGroup">
    <label>Document Type:</label>
    <div class="input-group">
      <select id="documentType">
        <option value="supplier_invoice">Supplier Invoice</option>
        <option value="pos_receipt">POS Receipt</option>
        <option value="supplier_credit_note">Supplier Credit Note</option>
        <option value="supplier_statement">Supplier Statement</option>
      </select>
    </div>
  </div>

  <div class="form-group" id="dateGroup">
    <label>Date:</label>
    <div class="input-group">
      <input type="text" id="dateField" placeholder="DD/MM/YYYY"/>
      <input type="date" id="datePicker"/>
    </div>
  </div>

  <div class="form-group" id="supplierNameGroup">
    <label>Supplier Name:</label>
    <div class="input-group">
      <input type="text" id="supplierName"/>
      <button type="button" onclick="randomizeSupplier()" class="randomize-btn">ðŸŽ²</button>
    </div>
  </div>

  <div class="form-group" id="customerNameGroup">
    <label>Customer Name:</label>
    <div class="input-group">
      <input type="text" id="customerName"/>
      <button type="button" onclick="randomizeCustomer()" class="randomize-btn">ðŸŽ²</button>
    </div>
  </div>

  <div class="form-group" id="documentRefGroup">
    <label>Document Reference:</label>
    <div class="input-group">
      <input type="text" id="documentRef"/>
      <button type="button" onclick="randomizeDocRef()" class="randomize-btn">ðŸŽ²</button>
    </div>
  </div>

  <div class="form-group" id="dueDateGroup">
    <label>Due Date:</label>
    <div class="input-group">
      <input type="text" id="dueField" placeholder="DD/MM/YYYY"/>
      <input type="date" id="duePicker"/>
    </div>
  </div>

  <div class="form-group" id="currencyGroup">
    <label>Currency:
      <span class="tooltip">â„¹
        <span class="tooltiptext">GBP â†’ UK dates (DD/MM/YYYY)<br>USD â†’ US dates (MM/DD/YYYY)</span>
      </span>
    </label>
    <div class="input-group">
      <select id="currency">
        <option value="GBP">GBP</option>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
      </select>
    </div>
  </div>

  <div class="form-group" id="taxRateGroup">
    <label>Tax Rate (%):</label>
    <div class="input-group">
      <select id="taxRate">
        <option value="5">5%</option>
        <option value="10">10%</option>
        <option value="15">15%</option>
        <option value="20" selected>20%</option>
        <option value="25">25%</option>
      </select>
    </div>
  </div>

  <div class="form-group" id="lineItemsCountGroup">
    <label>Line Items Count:</label>
    <div class="input-group">
      <input type="number" id="lineItemsCount" value="3" min="1" max="10"/>
      <button type="button" onclick="randomizeLineItemsCount()" class="randomize-btn">ðŸŽ²</button>
    </div>
  </div>

  <div class="form-group" id="countGroup">
    <label>Count:</label>
    <div class="input-group">
      <select id="count">
        <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
        <option>6</option><option>7</option><option>8</option><option>9</option><option>10</option>
      </select>
    </div>
  </div>

  <div class="form-group" id="totalAmountGroup">
    <label>Total Amount:</label>
    <div class="input-group">
      <input type="text" id="totalAmount" placeholder="0.00"/>
      <button type="button" onclick="randomizeTotalAmount()" class="randomize-btn">ðŸŽ²</button>
    </div>
  </div>

  <div class="form-group" id="linesCountGroup">
    <label>Number of Lines:</label>
    <div class="input-group">
      <input type="number" id="linesCount" value="1" min="1"/>
    </div>
  </div>

  <div class="form-group" id="generateInvoicesGroup">
    <label>Generate supporting invoices?</label>
    <div class="input-group">
      <label class="switch"><input type="checkbox" id="generateInvoices"/><span class="slider"></span></label>
    </div>
  </div>

  <button id="generateBtn" onclick="generateDocument()">Generate Document</button>
  <div id="result"></div>
  <div id="spinner" class="spinner"></div>

  <script>
    // ... (all your existing JS, plus:)
    document.addEventListener('DOMContentLoaded', () => {
      randomizeDocRef();      // ensure reference always random on load
      updateVisibility();
      renderDates();
      // rest of your setup...
    });
  </script>
</body>
</html>
